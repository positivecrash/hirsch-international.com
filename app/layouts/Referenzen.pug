extends extends/layout.pug
include mixins/sections.pug

block html
    - var meta_title = 'Referenzen'
    - var page_layout = 'default'
    - var bodyclass = ''

block content
    section.container-content-narrow.text-center
        h1 Referenzen
        p Von uns erhalten Sie herausragende Ergebnisse im wahrsten Sinne des Wortes: Ihr Projekt befindet sich bei uns in besten Händen, selbst und gerade dann, wenn es besonders komplex und herausfordernd ist – freuen Sie sich auf den Ablauf und das Resultat.


    section.container-content
        .works
            .works__item(data-id="1")
                img.works__item__cover(alt="", src="assets/i/referenzen/1/1_cover.jpg")
                h2.works__item__title Hotel Hyatt Prag
                .works__item__desc Tschechische Republik
            .works__info
                a(href="#").close
                .data
                    //- .container-content
                    //-     .data__photos
                    //-         .splide
                    //-             .splide__arrows
                    //-                 .splide__arrow.splide__arrow--prev
                    //-                     <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="27.6px" height="22.9px" xml:space="preserve"><polygon points="27.6,11.1 1.8,11.1 12.2,0.7 11.5,0 0,11.5 11.5,22.9 12.2,22.2 2,12.1 27.6,12.1 "/></svg>
                    //-                 .splide__arrow.splide__arrow--next
                    //-                     <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="27.6px" height="22.9px" xml:space="preserve"><polygon points="0,11.1 25.9,11.1 15.5,0.7 16.2,0 27.6,11.5 16.2,22.9 15.5,22.2 25.6,12.1 0,12.1 "/></svg>

                    //-             .splide__track
                    //-                 ul.splide__list
                    //-                     li.splide__slide
                    //-                         img(src="assets/i/works/1.jpg", alt="")
                    //-                     li.splide__slide
                    //-                         img(src="assets/i/works/2.jpg", alt="")
                    //-                     li.splide__slide
                    //-                         img(src="assets/i/works/3.jpg", alt="")

                    //-     .data__info
                    //-         ul
                    //-             li
                    //-                 h4 St. Petersburg
                    //-                 i St. Petersburg, Russland
                                
                    //-             li
                    //-                 b Auftraggeber:
                    //-                 span zB: ERBUD S.A.

                    //-             li
                    //-                 b Ausführungszeit:
                    //-                 span 2017

                    //-             li
                    //-                 b Umfang der Arbeiten:
                    //-                 span zB: Malerarbeiten, Putzarbeiten, Spachtelung
                        

            .works__item(data-id="2")
                img.works__item__cover(alt="", src="assets/i/referenzen/2/1_cover.jpg")
                h2.works__item__title militärkrankenhaus indonesien
                .works__item__desc Stadt, Land
            .works__info
                a(href="#").close
                .data
            
            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/3/1_cover.jpg")
                h2.works__item__title Hotel Absheron / JW Marriott
                .works__item__desc Baku, Aserbaidschan
            .works__info
                a(href="#").close
                .data

            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/3/1_cover.jpg")
                h2.works__item__title Hotel Absheron
                .works__item__desc Baku, Aserbaidschan
            .works__info
                a(href="#").close
                .data

            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/1/1_cover.jpg")
                h2.works__item__title Hotel Hyatt Prag
                .works__item__desc Tschechische Republik
            .works__info
                a(href="#").close
                .data

            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/2/1_cover.jpg")
                h2.works__item__title militärkrankenhaus
                .works__item__desc Stadt, Land
            .works__info
                a(href="#").close
                .data

            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/2/1_cover.jpg")
                h2.works__item__title militärkrankenhaus indonesien
                .works__item__desc Stadt, Land
            .works__info
                a(href="#").close
                .data
            
            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/3/1_cover.jpg")
                h2.works__item__title Hotel Absheron / JW Marriott
                .works__item__desc Baku, Aserbaidschan
            .works__info
                a(href="#").close
                .data

            .works__item
                img.works__item__cover(alt="", src="assets/i/referenzen/3/1_cover.jpg")
                h2.works__item__title Hotel Absheron / JW Marriott
                .works__item__desc Baku, Aserbaidschan
            .works__info
                a(href="#").close
                .data

        link(href='https://cdn.jsdelivr.net/npm/@splidejs/splide@2.4.8/dist/css/splide-core.min.css' rel='stylesheet')
        script(src='https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js')

        script.
            let
                list = document.querySelectorAll(".works__item"),
                data = document.querySelectorAll(".works__info"),
                close = document.querySelectorAll(".works__info .close"),
                active = "active";

            
            function setActive(obj) {
                list.forEach(function (entrylist) {
                    entrylist.classList.remove(active);
                });

                data.forEach(function(entrydata) {
                    entrydata.classList.remove(active);
                });

                getData(obj);
                obj.classList.add(active);
                obj.nextElementSibling.classList.add(active);
            }


            function closeAll() {
                list.forEach(function (entrylist) {
                    entrylist.classList.remove(active);
                });

                data.forEach(function(entrydata) {
                    entrydata.classList.remove(active);
                });
            }


            function getData(obj) {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function() {
                    //- if (this.readyState == 4 && this.status == 200) {
                    if (this.readyState == 4) {
                        var ProjectData = JSON.parse(this.responseText);
                        //- console.log(ProjectData);

                        ProjectData.forEach(function(item, index, array) {
                            if(obj.dataset.id == item.id) {
                                //- obj.nextElementSibling.querySelector('.data').innerHTML = "<h3>" + item.title.rendered + "</h3>";
                            }
                        });
                    }
                };
                xmlhttp.open("GET", "assets/js/referenzen.json", true);
                xmlhttp.send();
            }


            list.forEach(function (entry) {

                entry.addEventListener("click", function (event){
                    event.preventDefault();
                    setActive(this);
                });
            });

            close.forEach(function (close) {
                close.addEventListener("click", function (event){
                    event.preventDefault();
                    closeAll();
                });
            });

            document.addEventListener( 'DOMContentLoaded', function () {

                var elms = document.getElementsByClassName( 'splide' );
                for ( var i = 0, len = elms.length; i < len; i++ ) {
                    new Splide( elms[ i ], {
                        type: 'fade'
                    } ).mount();
                }
                
            });